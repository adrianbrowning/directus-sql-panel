import{useApi as e}from"@directus/extensions-sdk";import{resolveComponent as t,openBlock as a,createElementBlock as n,normalizeClass as s,createVNode as r}from"vue";var i={props:{id:String,showHeader:{type:Boolean,default:!1},text:{type:String,default:""}},data:()=>({headers:[],items:[]}),created(){this.fetchData()},methods:{async fetchData(){const t=e(),{data:a}=await t(`sql-panel-api/${this.id}`);this.headers=a.headers,this.items=a.items}}};var d=[],o=[];!function(e,t){if(e&&"undefined"!=typeof document){var a,n=!0===t.prepend?"prepend":"append",s=!0===t.singleTag,r="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(s){var i=d.indexOf(r);-1===i&&(i=d.push(r)-1,o[i]={}),a=o[i]&&o[i][n]?o[i][n]:o[i][n]=l()}else a=l();65279===e.charCodeAt(0)&&(e=e.substring(1)),a.styleSheet?a.styleSheet.cssText+=e:a.appendChild(document.createTextNode(e))}function l(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var a=Object.keys(t.attributes),s=0;s<a.length;s++)e.setAttribute(a[s],t.attributes[a[s]]);var i="prepend"===n?"afterbegin":"beforeend";return r.insertAdjacentElement(i,e),e}}("\n.sql-panel-container[data-v-0129a3fb] {\n  width: 100%;\n  height: 100%;\n  overflow-x: auto;\n  overflow-y: auto;\n}\n\n",{}),i.render=function(e,i,d,o,l,p){const c=t("v-table");return a(),n("div",{class:s(["sql-panel-container",{"has-header":d.showHeader}])},[r(c,{showResize:!0,headers:l.headers,"onUpdate:headers":i[0]||(i[0]=e=>l.headers=e),items:l.items},null,8,["headers","items"])],2)},i.__scopeId="data-v-0129a3fb",i.__file="src/panel.vue";var l={id:"sql-panel",name:"SQL panel",icon:"box",description:"Show result of a stored SQL query as a table",component:i,options:[{field:"sql",name:"SQL query",type:"string",meta:{interface:"input-multiline",width:"full"}}],minWidth:12,minHeight:8};export{l as default};
